# Database
# Use postgres:5432 when running backend inside Docker (production)
DATABASE_URL="postgresql://postgres:password@postgres:5432/microplate"
# Use localhost:35432 when running backend outside Docker (local development)
#DATABASE_URL="postgresql://postgres:password@localhost:35432/microplate"

# JWT Secrets
JWT_ACCESS_SECRET=NYr5g7vZIxvDja90w5UYoxIj-HxcYDyrBnKDRB9dQ-w
JWT_REFRESH_SECRET=0EnadxxwuzghQMsUDzbXxQLGx4rjqcNtUOJpkBmJYp0=
JWT_ISSUER=microplate-auth-service
JWT_AUDIENCE=microplate-api


# Email Configuration
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"
SMTP_FROM="Microplate AI <noreply@microplate-ai.com>"

# Application
NODE_ENV="development"
PORT=6401
BASE_URL=http://localhost:6401
FRONTEND_URL=http://localhost:6410
API_BASE_URL=http://localhost:6400

# CORS Configuration
ENABLE_CORS=true
CORS_ALLOWED_ORIGINS=http://localhost:6410
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Origin, X-Requested-With, Content-Type, Accept, Authorization, X-Request-ID
CORS_EXPOSED_HEADERS=X-Request-ID
CORS_MAX_AGE=600

# Security
BCRYPT_ROUNDS=12
TOKEN_EXPIRY_ACCESS="15m"
TOKEN_EXPIRY_REFRESH="7d"
PASSWORD_RESET_EXPIRY="30m"
# Email verification disabled

# Rate limiting (tuned for Docker / good throughput; 1 min window, 10k requests)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=10000

# Logging
LOG_LEVEL="info"
LOG_FORMAT="json"

# Azure AD SSO
AAD_ENABLED=true
AAD_CLIENT_ID="151b9468-e95f-483e-8750-64d0151ef0dc"
AAD_AUTHORITY="https://login.microsoftonline.com/eb1f94dc-8d25-4c67-985c-04be74c8f698"
AAD_DEFAULT_REDIRECT="http://localhost:6410/capture"
# Include User.Read to fetch profile photo from organization (Microsoft Graph /me/photo)
# In Azure AD App Registration: API permissions → Add → Microsoft Graph → Delegated → User.Read
AAD_SCOPES="openid,profile,email,User.Read"
AAD_ALLOWED_DOMAINS=""
AAD_CLIENT_SECRET="your-aad-client-secret"
AAD_CERT_THUMBPRINT=""
AAD_PRIVATE_KEY_PATH=""
SSO_EXCHANGE_EXPIRY="2m"
